!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).deepCopy=e()}}(function(){var define,module,exports;return function(){return function e(t,a,r){function o(i,d){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!d&&c)return c(i,!0);if(n)return n(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var s=a[i]={exports:{}};t[i][0].call(s.exports,function(e){return o(t[i][1][e]||e)},s,s.exports,e,t,a,r)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}}()({1:[function(e,t,a){"use strict";const[r,o,n]=e("./object-library.js"),i={goDeep:!0,includeNonEnumerable:!1,maxDepth:20},d=(e,t)=>{let{destObject:a,srcType:r,depth:o,options:i}=t;if(++o>=i.maxDepth)return;const c=n[r];if(!c.mayDeepCopy)return;const p=c.addElement;c.iterate(e,i.includeNonEnumerable,e=>{const t=e.value,r=e.type;let c=n[r].mayDeepCopy,s=c?n[r].makeEmpty(t):n[r].makeShallow(t);p(a,e.key,s,e.descriptor),c&&d(t,{destObject:s,srcType:r,depth:o,options:i})})};t.exports=function(e,t=i){if(Object.keys(i).forEach(e=>{void 0===t[e]&&(t[e]=i[e])}),r(e))return e;if(!t.goDeep)return n[o(e)].makeShallow(e);const a=o(e);if(!n[a].mayDeepCopy)return n[a].makeShallow(e);let c=n[a].makeEmpty(e);return d(e,{destObject:c,srcType:a,depth:0,options:t}),c}},{"./object-library.js":2}],2:[function(require,module,exports){const objectBehaviors={},isPrimitive=e=>{let t=typeof e;return"number"===t||"string"===t||"boolean"===t||"undefined"===t||"bigint"===t||"symbol"===t||null===e},objectType=e=>{if(isPrimitive(e)||!e instanceof Object)return"primitive";const t=e.constructor&&e.constructor.name&&e.constructor.name.toLowerCase();if("string"==typeof t&&t.length&&objectBehaviors[t])return t;let a;for(const t in objectBehaviors)if(!(a=objectBehaviors[t].type)||e instanceof a)return t;return"unknown"},arrayAddElement=(e,t,a)=>Array.prototype.push.call(e,a),arrayMakeEmpty=e=>{const t=[];return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},arrayMakeShallow=e=>{const t=[...e];return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},arrayIterate=(e,t,a)=>{const r=e.length;for(let t=0;t<r;t++){const r=e[t];a({key:t,value:r,type:objectType(r)})}},addArrayBehavior=()=>{Object.assign(objectBehaviors,{array:{type:Array,mayDeepCopy:!0,addElement:arrayAddElement,makeEmpty:arrayMakeEmpty,makeShallow:arrayMakeShallow,iterate:arrayIterate}})},addDateBehavior=()=>{Object.assign(objectBehaviors,{date:{type:Date,makeShallow:e=>new Date(e.getTime())}})},addRegExpBehavior=()=>{Object.assign(objectBehaviors,{regexp:{type:RegExp,makeShallow:e=>new RegExp(e)}})},addFunctionBehavior=()=>{Object.assign(objectBehaviors,{function:{type:Function,makeShallow:e=>e}})},addErrorBehavior=()=>{Object.assign(objectBehaviors,{error:{type:Error,makeShallow:e=>{const t=new Error(e.message);return t.stack=e.stack,t}}})},addTypedArrayBehavior=name=>{let isDefined=eval("typeof "+name+' !== "undefined"');if(isDefined){const nameLC=name.toLowerCase(),makeShallow=eval("source => "+name+".from(source)");objectBehaviors[nameLC]={type:eval(name),makeShallow:makeShallow}}},addAllTypedArrayBehaviors=()=>{["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint32Array","Float32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].forEach(e=>addTypedArrayBehavior(e))},addArrayBufferBehavior=()=>{"undefined"!=typeof ArrayBuffer&&Object.assign(objectBehaviors,{arraybuffer:{type:ArrayBuffer,makeShallow:e=>e.slice(0)}})},addMapBehavior=()=>{"undefined"!=typeof Map&&Object.assign(objectBehaviors,{map:{type:Map,mayDeepCopy:!0,addElement:(e,t,a)=>e.set(t,a),makeEmpty:()=>new Map,makeShallow:e=>new Map(e),iterate:(e,t,a)=>{e.forEach((e,t)=>{const r={key:t,value:e,type:objectType(e)};a(r)})}}})},addSetBehavior=()=>{"undefined"!=typeof Set&&Object.assign(objectBehaviors,{set:{type:Set,mayDeepCopy:!0,addElement:(e,t,a)=>e.add(a),makeEmpty:()=>new Set,makeShallow:e=>new Set(e),iterate:(e,t,a)=>{e.forEach(e=>{const t={key:null,value:e,type:objectType(e)};a(t)})}}})},addWeakSetBehavior=()=>{"undefined"!=typeof WeakSet&&Object.assign(objectBehaviors,{weakset:{type:WeakSet,makeShallow:e=>e}})},addWeakMapBehavior=()=>{"undefined"!=typeof WeakMap&&Object.assign(objectBehaviors,{weakmap:{type:WeakMap,makeShallow:e=>e}})},addBufferBehavior=()=>{"undefined"!=typeof Buffer&&Object.assign(objectBehaviors,{buffer:{type:Buffer,makeShallow:e=>Buffer.from(e)}})},objectAddElement=(e,t,a,r)=>{r?Object.defineProperty(e,t,r):e[t]=a},objectMakeEmpty=e=>{const t={};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},objectMakeShallow=e=>{const t=Object.assign({},e);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},objectIterate=(e,t,a)=>{const r=t?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;for(let n=0;n<o;n++){const o=r[n],i=e[o],d={key:o,value:i,type:objectType(i)};t&&!e.propertyIsEnumerable(o)&&(d.descriptor=Object.getOwnPropertyDescriptor(e,o)),a(d)}},addObjectBehavior=()=>{Object.assign(objectBehaviors,{object:{type:Object,mayDeepCopy:!0,addElement:objectAddElement,makeEmpty:objectMakeEmpty,makeShallow:objectMakeShallow,iterate:objectIterate}})},addUnknownAndPrimitive=()=>{Object.assign(objectBehaviors,{unknown:{makeShallow:e=>e},primitive:{makeShallow:e=>e}})};addArrayBehavior(),addDateBehavior(),addRegExpBehavior(),addFunctionBehavior(),addErrorBehavior(),addAllTypedArrayBehaviors(),addArrayBufferBehavior(),addMapBehavior(),addSetBehavior(),addWeakSetBehavior(),addWeakMapBehavior(),addBufferBehavior(),addObjectBehavior(),addUnknownAndPrimitive(),module.exports=[isPrimitive,objectType,objectBehaviors]},{}]},{},[1])(1)});