!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).deepCopy=e()}}(function(){return function(){return function e(t,r,n){function a(y,i){if(!r[y]){if(!t[y]){var p="function"==typeof require&&require;if(!i&&p)return p(y,!0);if(o)return o(y,!0);var f=new Error("Cannot find module '"+y+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[y]={exports:{}};t[y][0].call(l.exports,function(e){return a(t[y][1][e]||e)},l,l.exports,e,t,r,n)}return r[y].exports}for(var o="function"==typeof require&&require,y=0;y<n.length;y++)a(n[y]);return a}}()({1:[function(e,t,r){"use strict";const[n,a,o]=e("./object-library.js"),y={goDeep:!0,includeNonEnumerable:!1,maxDepth:20};t.exports=function(e,t){if(void 0===(t=t||y).goDeep&&(t.goDeep=y.goDeep),void 0===t.includeNonEnumerable&&(t.includeNonEnumerable=y.includeNonEnumerable),void 0===t.maxDepth&&(t.maxDepth=y.maxDepth),!t.goDeep)return o[a(e)].makeShallow(e);if(!e||n(e))return e;const r=a(e);if(!o[r].mayDeepCopy)return o[r].makeShallow(e);let p=o[r].makeEmpty(e);return i(e,p,r,0,t),p};const i=(e,t,r,n,a)=>{if(++n>=a.maxDepth)return void console.log("copyObject too deep, depth:",n,",obj:",e);const y=o[r];if(!y.mayDeepCopy)return;const p=y.addElement;(0,y.iterate)(e,a.includeNonEnumerable,e=>{const r=e.value,y=e.type;let f,l=o[y].mayDeepCopy;f=l?o[y].makeEmpty(r):o[y].makeShallow(r),p(t,e.key,f,e.descriptor),l&&i(r,f,y,n,a)})}},{"./object-library.js":2}],2:[function(e,t,r){const n=e=>{let t=typeof e;return"number"===t||"string"===t||"boolean"===t||"undefined"===t||"bigint"===t||"symbol"===t||null===e},a=e=>{if(n(e)||!e instanceof Object)return"primitive";const t=e.constructor&&e.constructor.name&&e.constructor.name.toLowerCase();if("string"==typeof t&&t.length&&o[t])return t;let r;for(const t in o)if(!(r=o[t].type)||e instanceof r)return t;return"unknown"},o={array:{type:Array,mayDeepCopy:!0,addElement:(e,t,r)=>Array.prototype.push.call(e,r),makeEmpty:e=>{const t=[];return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},makeShallow:e=>{const t=[...e];return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},iterate:(e,t,r)=>{const n=e.length;for(let t=0;t<n;t++){const n=e[t];r({key:t,value:n,type:a(n)})}}},date:{type:Date,makeShallow:e=>new Date(e.getTime())},regexp:{type:RegExp,makeShallow:e=>new RegExp(e)},function:{type:Function,makeShallow:e=>e}};"undefined"!=typeof Int8Array&&Object.assign(o,{int8array:{type:Int8Array,makeShallow:e=>Int8Array.from(e)}}),"undefined"!=typeof Uint8Array&&Object.assign(o,{uint8array:{type:Uint8Array,makeShallow:e=>Uint8Array.from(e)}}),"undefined"!=typeof Uint8ClampedArray&&Object.assign(o,{uint8clampedarray:{type:Uint8ClampedArray,makeShallow:e=>Uint8ClampedArray.from(e)}}),"undefined"!=typeof Int16Array&&Object.assign(o,{int16array:{type:Int16Array,makeShallow:e=>Int16Array.from(e)}}),"undefined"!=typeof Uint16Array&&Object.assign(o,{uint16array:{type:Uint16Array,makeShallow:e=>Uint16Array.from(e)}}),"undefined"!=typeof Int32Array&&Object.assign(o,{int32array:{type:Int32Array,makeShallow:e=>Int32Array.from(e)}}),"undefined"!=typeof Uint32Array&&Object.assign(o,{uint32array:{type:Uint32Array,makeShallow:e=>Uint32Array.from(e)}}),"undefined"!=typeof Float32Array&&Object.assign(o,{float32array:{type:Float32Array,makeShallow:e=>Float32Array.from(e)}}),"undefined"!=typeof Float64Array&&Object.assign(o,{float64array:{type:Float64Array,makeShallow:e=>Float64Array.from(e)}}),"undefined"!=typeof BigInt64Array&&Object.assign(o,{bigint64array:{type:BigInt64Array,makeShallow:e=>BigInt64Array.from(e)}}),"undefined"!=typeof BigUint64Array&&Object.assign(o,{biguint64array:{type:BigUint64Array,makeShallow:e=>BigUint64Array.from(e)}}),"undefined"!=typeof ArrayBuffer&&Object.assign(o,{arraybuffer:{type:ArrayBuffer,makeShallow:e=>e.slice(0)}}),"undefined"!=typeof Map&&Object.assign(o,{map:{type:Map,mayDeepCopy:!0,addElement:(e,t,r)=>e.set(t,r),makeEmpty:()=>new Map,makeShallow:e=>new Map(e),iterate:(e,t,r)=>{e.forEach((e,t)=>{const n={key:t,value:e,type:a(e)};r(n)})}}}),"undefined"!=typeof Set&&Object.assign(o,{set:{type:Set,mayDeepCopy:!0,addElement:(e,t,r)=>e.add(r),makeEmpty:()=>new Set,makeShallow:e=>new Set(e),iterate:(e,t,r)=>{e.forEach(e=>{const t={key:null,value:e,type:a(e)};r(t)})}}}),"undefined"!=typeof WeakSet&&Object.assign(o,{weakset:{type:WeakSet,makeShallow:e=>e}}),"undefined"!=typeof WeakMap&&Object.assign(o,{weakmap:{type:WeakMap,makeShallow:e=>e}}),"undefined"!=typeof Buffer&&Object.assign(o,{buffer:{type:Buffer,makeShallow:e=>Buffer.from(e)}}),Object.assign(o,{object:{type:Object,mayDeepCopy:!0,addElement:(e,t,r,n)=>{n?Object.defineProperty(e,t,n):e[t]=r},makeEmpty:e=>{const t={};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},makeShallow:e=>{const t=Object.assign({},e);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t},iterate:(e,t,r)=>{const n=t?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;for(let y=0;y<o;y++){const o=n[y],i=e[o],p={key:o,value:i,type:a(i)};t&&!e.propertyIsEnumerable(o)&&(p.descriptor=Object.getOwnPropertyDescriptor(e,o)),r(p)}}},unknown:{makeShallow:e=>e},primitive:{makeShallow:e=>e}}),t.exports=[n,a,o]},{}]},{},[1])(1)});