"use strict";const[isPrimitive,objectType,objectBehaviors]=require("./object-library.js"),defaultOptions={goDeep:!0,includeNonEnumerable:!1,maxDepth:20};module.exports=function(e,o){if(void 0===(o=o||defaultOptions).goDeep&&(o.goDeep=defaultOptions.goDeep),void 0===o.includeNonEnumerable&&(o.includeNonEnumerable=defaultOptions.includeNonEnumerable),void 0===o.maxDepth&&(o.maxDepth=defaultOptions.maxDepth),!o.goDeep)return objectBehaviors[objectType(e)].makeShallow(e);if(!e||isPrimitive(e))return e;const t=objectType(e);if(!objectBehaviors[t].mayDeepCopy)return objectBehaviors[t].makeShallow(e);let i=objectBehaviors[t].makeEmpty(e);return copyObject(e,i,t,0,o),i};const copyObject=(e,o,t,i,a)=>{if(++i>=a.maxDepth)return void console.log("copyObject too deep, depth:",i,",obj:",e);const r=objectBehaviors[t];if(!r.mayDeepCopy)return;const c=r.addElement;(0,r.iterate)(e,a.includeNonEnumerable,e=>{const t=e.value,r=e.type;let n,p=objectBehaviors[r].mayDeepCopy;n=p?objectBehaviors[r].makeEmpty(t):objectBehaviors[r].makeShallow(t),c(o,e.key,n,e.descriptor),p&&copyObject(t,n,r,i,a)})};