"use strict";const[isPrimitive,objectType,objectBehaviors]=require("./object-library.js"),defaultOpts={goDeep:!0,includeNonEnumerable:!1,maxDepth:20},copyObject=(e,t)=>{let{destObject:o,srcType:p,depth:r,options:c}=t;if(++r>=c.maxDepth)return;const s=objectBehaviors[p];if(!s.mayDeepCopy)return;const i=s.addElement;s.iterate(e,c.includeNonEnumerable,e=>{const t=e.value,p=e.type;let s=objectBehaviors[p].mayDeepCopy,a=s?objectBehaviors[p].makeEmpty(t):objectBehaviors[p].makeShallow(t);i(o,e.key,a,e.descriptor),s&&copyObject(t,{destObject:a,srcType:p,depth:r,options:c})})};function deepCopy(e,t=defaultOpts){if(Object.keys(defaultOpts).forEach(e=>{void 0===t[e]&&(t[e]=defaultOpts[e])}),isPrimitive(e))return e;if(!t.goDeep)return objectBehaviors[objectType(e)].makeShallow(e);const o=objectType(e);if(!objectBehaviors[o].mayDeepCopy)return objectBehaviors[o].makeShallow(e);let p=objectBehaviors[o].makeEmpty(e);return copyObject(e,{destObject:p,srcType:o,depth:0,options:t}),p}module.exports=deepCopy;