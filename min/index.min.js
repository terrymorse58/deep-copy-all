"use strict";const[isPrimitive,objectType,objectBehaviors]=require("./object-library.js");module.exports=function(e,o){const{goDeep:t,includeNonEnumerable:c}=o||{goDeep:!0,includeNonEnumerable:!1};if(!t)return objectBehaviors[objectType(e)].makeShallow(e);if(!e||isPrimitive(e))return e;const r=objectType(e);if(!objectBehaviors[r].mayDeepCopy)return objectBehaviors[r].makeShallow(e);let i=objectBehaviors[r].makeEmpty(e);return copyObject(e,i,r,c),i};const copyObject=(e,o,t=null,c=!0)=>{t=t||objectType(e);const r=objectBehaviors[t];if(!r.mayDeepCopy)return;const i=r.addElement;(0,r.iterate)(e,c,e=>{const t=e.value,r=e.type;let a,s=objectBehaviors[r].mayDeepCopy;a=s?objectBehaviors[r].makeEmpty(t):objectBehaviors[r].makeShallow(t),i(o,e.key,a,e.descriptor),s&&copyObject(t,a,r,c)})};